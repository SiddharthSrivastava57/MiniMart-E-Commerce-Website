<!-- shop/templates/shop/wishlist.html -->

{% extends 'base.html' %}

{% block title %}My Wishlist - MiniMart{% endblock %}

{% block content %}
<h1>My Wishlist</h1>

{% if wishlist_items %}
    <div class="wishlist-grid">
        {% for item in wishlist_items %}
            <!-- Add unique ID to each card so HTMX can remove it -->
            <div class="wishlist-card" id="wishlist-card-{{ item.product.id }}">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="product-image">
                {% else %}
                    <div class="product-image-placeholder">
                        <span>No Image</span>
                    </div>
                {% endif %}
                
                <h3>{{ item.product.name }}</h3>
                <p class="category">{{ item.product.category.name }}</p>
                <p class="price">${{ item.product.price }}</p>
                <p class="added-date">Added: {{ item.added_at|date:"M d, Y" }}</p>
                
                <button 
                    hx-post="{% url 'remove_from_wishlist' item.product.id %}"
                    hx-target="#wishlist-card-{{ item.product.id }}"
                    hx-swap="outerHTML"
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    class="btn btn-remove">
                    Remove from Wishlist
                </button>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-wishlist">
        <p class="empty-message">Your wishlist is empty. Start adding products!</p>
        <a href="{% url 'product_list' %}" class="btn btn-primary">Browse Products</a>
    </div>
{% endif %}

{% endblock %}